操作系统内核程序
================

在进入时钟中断之前做了哪些准备工作？
------------------------------------

初始化ds，不初始化行不行？不行，找不到数据区，进入保护模式之前，ds，es
都为0x07c0，必须重新初始为0x10，这样基地址变为0x0。此外，栈空间必须提前
准备好。

重新建idt表，讲述建的过程，怎样用寄存器在内存地址里拼成64字节的描述符
，预留了256个中断向量表，全用0初始化，然后，用循环创建256个默认中断，装
载idtr，用预先放在内存的6个字节，限长设为256。此外，需要额外讲述call的用
法，近调用只把下一指令的ip放在栈里，ret近返回弹栈时，只把ip弹出来。

gdt表建好后，必须重新刷新各个段寄存器，ds、es、fs，gs等，栈按理说，到
此时没变化，为了安全起见，重新设了一遍栈顶。

设置8253定时芯片，把计数器通道0设置成每隔10ms向中断向量控制器发送一个
中断请求信号，硬件操作，无需多讲。

在idt表第8项和第0x80项处，分别设置定时中断门描述符和系统调用陷阱门描述
符。

构建堆栈返回，完成从内核模式切换到用户模式
------------------------------------------

理解如何从内核模式切换到用户模式

压到哪个栈

压入堆栈几个值？

压入的值分别是什么？

次序是什么?

弹栈以后，计算机是如何跳转到任务0的用户程序
-------------------------------------------

CS，EIP是如何取值的

CS=0x0f应该查GDT还是LDT表

LDT表的基地址从哪里获得

特权级变化，栈需要切换
----------------------

当特权级变化，为什么要进行栈切换

任务空间一般有几个栈空间

如何切换到相应的栈

如何响应0x80中断
----------------

理解掌握保护模式下中断响应机制

如何跳转到相应中断程序？

中断程序发生时，特权级是否改变？

栈是否要切换？

系统是否进行了压栈，压入的是什么？为什么要压栈？

响应完中断，如何返回？

如何响应0x08时钟中断
--------------------

时钟中断是从哪里被响应的？

时钟中断里是如何完成用户任务切换的

时钟中断里，程序执行流程是怎样的？

当任务0切换到任务1，再切换回任务0时，是从Task0处继续执行吗？

从时钟中断是如何返回的？

如何从任务0切换到任务1
----------------------

理解什么是TSS？

当ljmp TSS1时，硬件做了哪些操作？

如何保护被切换的现场？

tr，ldtr变化吗？

程序跳到哪里去执行，如何跳的？

深入理解模式切换与任务切换
--------------------------

一个完整的时钟中断的流程是怎样的？

操作系统是如何在内核模式与内核模式下切换的

模式切换与任务切换的区别是什么？

分析一下切换的代价
